# 编号规则与主键调整

- 编码格式：`YYMMNNN`，其中 `YY` 为年份后两位，`MM` 为月份（01-12），`NNN` 为当月序列（001-999）
- 示例：`2512001` 表示 2025 年 12 月第 1 个编号
- 重置策略：每月序列从 `001` 重新开始

## 数据库调整

- 删除表 `biz_key_seq` 及所有引用
- `cloth_inventory` 使用 `item_code TEXT PRIMARY KEY` 作为主键
- 入/出库记录表继续使用自增 `id` 主键，`item_code` 作为外键引用库存编号（逻辑约束）

## 生成逻辑

- 后端按当月已存在的最大编号序列 + 1 生成新编号，范围 `001-999`
- 并发安全：主进程采用同步序列化处理生成请求；插入时如遇唯一约束冲突，按重试策略处理
- API：渲染进程调用 `electronAPI.genItemCode(date)` 获取编号；业务编号生成调用 `electronAPI.genBizId(prefix, date)`（按表独立序列）

## 校验规则

- 输入校验必须符合 `YYMMNNN` 格式：7 位数字，月份在 `01-12`，序列在 `001-999`
